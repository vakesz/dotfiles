##### ── General ─────────────────────────────────────────────────────────────
set -g mouse on
set -g history-limit 10000
set -s escape-time 0
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g repeat-time 200
set -g set-clipboard on

# Terminal / colors (enables 24-bit truecolor pass-through)
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*:RGB"

##### ── Prefix & core bindings ─────────────────────────────────────────────
unbind C-b
set -g prefix C-a
bind C-a send-prefix
bind r source-file ~/.tmux.conf \; display "tmux.conf reloaded ✔"

# Splits like Vim
unbind '"'
unbind %
bind | split-window -h
bind - split-window -v

# Pane navigation with Ctrl-h/j/k/l
bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R

# Resize panes quickly
bind -r C-Left  resize-pane -L 5
bind -r C-Right resize-pane -R 5
bind -r C-Up    resize-pane -U 5
bind -r C-Down  resize-pane -D 5

# Quick window cycling
bind -n M-Left  previous-window
bind -n M-Right next-window

##### ── Copy mode & clipboard (vi keys, cross-platform) ────────────────────
setw -g mode-keys vi

# Pick best clipboard tool: pbcopy (mac) > wl-copy (Wayland) > xclip (X11)
if-shell 'command -v pbcopy >/dev/null 2>&1' \
  'set -g @copy_cmd "pbcopy"' \
  'if-shell "command -v wl-copy >/dev/null 2>&1" \
     "set -g @copy_cmd \"wl-copy\"" \
     "set -g @copy_cmd \"xclip -sel clip\""'

# y / Enter copy selection to system clipboard
bind -T copy-mode-vi y     send -X copy-pipe-and-cancel "#{@copy_cmd}"
bind -T copy-mode-vi Enter send -X copy-pipe-and-cancel "#{@copy_cmd}"
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "#{@copy_cmd}"

##### ── Theme: Rose-Pine (truecolor hex, no variables in color fields) ─────
# Palette (hex used directly in style fields)
# base=#191724 subtle=#908caa muted=#6e6a86 text=#e0def4
# love=#eb6f92 gold=#f6c177 foam=#9ccfd8 iris=#c4a7e7

# Statusline
set -g status on
set -g status-interval 5
set -g status-justify centre
set -g status-bg "#191724"
set -g status-fg "#908caa"

set -g status-left-length 40
set -g status-right-length 80
set -g status-left  "#[fg=#9ccfd8,bold] #S #[fg=#908caa]"
set -g status-right "#[fg=#908caa] #[fg=#c4a7e7]%Y-%m-%d %H:%M #[fg=#f6c177] #[fg=#eb6f92]#(whoami)"

# Window titles
setw -g window-status-separator ""
setw -g window-status-format         " #[fg=#6e6a86]#I:#W "
setw -g window-status-current-format "#[fg=#191724,bg=#9ccfd8,bold] #I:#W #[default]"

# Pane borders
set -g pane-border-style        "fg=#6e6a86"
set -g pane-active-border-style "fg=#9ccfd8"

# Message / prompt styling
set -g message-style "bg=#191724,fg=#e0def4"
set -g message-command-style "bg=#191724,fg=#e0def4"
set -g mode-style "bg=#6e6a86,fg=#191724"

##### ── QoL tweaks ─────────────────────────────────────────────────────────
set -g visual-bell off
setw -g monitor-activity on
set -g activity-action other

set -g set-titles on
set -g set-titles-string "#S: #W — tmux"

##### ── Optional: session picker hook (if you have ~/bin/tmux-sessionizer) ─
# bind s run-shell "tmux new-session -A -s $(~/bin/tmux-sessionizer)"

##### ── 256-color fallback (uncomment if you must disable truecolor) ───────
# set -g status-bg colour235
# set -g status-fg colour246
# setw -g window-status-format         " #[fg=colour244]#I:#W "
# setw -g window-status-current-format "#[fg=colour235,bg=colour116,bold] #I:#W #[default]"
# set -g pane-border-style        "fg=colour244"
# set -g pane-active-border-style "fg=colour116"
# set -g status-left  "#[fg=colour116,bold] #S #[fg=colour246]|"
# set -g status-right "#[fg=colour246]| #[fg=colour182]%Y-%m-%d %H:%M #[fg=colour222]| #[fg=colour168]#(whoami)"
